<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GCD | sooxie</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b6bfb1ac.css" as="style"><link rel="preload" href="/blog/assets/js/app.2b1dd648.js" as="script"><link rel="preload" href="/blog/assets/js/2.9d35f1e7.js" as="script"><link rel="preload" href="/blog/assets/js/61.0a06d51b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.05c0c0f2.js"><link rel="prefetch" href="/blog/assets/js/11.80a46aca.js"><link rel="prefetch" href="/blog/assets/js/12.c3bb0779.js"><link rel="prefetch" href="/blog/assets/js/13.0ac6bf96.js"><link rel="prefetch" href="/blog/assets/js/14.4a902ab0.js"><link rel="prefetch" href="/blog/assets/js/15.e3b1de22.js"><link rel="prefetch" href="/blog/assets/js/16.a55bdbe8.js"><link rel="prefetch" href="/blog/assets/js/17.ccc303f1.js"><link rel="prefetch" href="/blog/assets/js/18.434a4e7e.js"><link rel="prefetch" href="/blog/assets/js/19.2c8625c2.js"><link rel="prefetch" href="/blog/assets/js/20.74d5efe1.js"><link rel="prefetch" href="/blog/assets/js/21.1935b90a.js"><link rel="prefetch" href="/blog/assets/js/22.922aaf91.js"><link rel="prefetch" href="/blog/assets/js/23.87709697.js"><link rel="prefetch" href="/blog/assets/js/24.1a78ec94.js"><link rel="prefetch" href="/blog/assets/js/25.c7b87c99.js"><link rel="prefetch" href="/blog/assets/js/26.b89ac752.js"><link rel="prefetch" href="/blog/assets/js/27.9fca9731.js"><link rel="prefetch" href="/blog/assets/js/28.d03624e3.js"><link rel="prefetch" href="/blog/assets/js/29.e6a8c56a.js"><link rel="prefetch" href="/blog/assets/js/3.c1504772.js"><link rel="prefetch" href="/blog/assets/js/30.ab747e65.js"><link rel="prefetch" href="/blog/assets/js/31.93caa551.js"><link rel="prefetch" href="/blog/assets/js/32.a33dfa2e.js"><link rel="prefetch" href="/blog/assets/js/33.116287a2.js"><link rel="prefetch" href="/blog/assets/js/34.7e9bef1c.js"><link rel="prefetch" href="/blog/assets/js/35.a2ec2d50.js"><link rel="prefetch" href="/blog/assets/js/36.2a0380a0.js"><link rel="prefetch" href="/blog/assets/js/37.26cec5ab.js"><link rel="prefetch" href="/blog/assets/js/38.3bfeb8c0.js"><link rel="prefetch" href="/blog/assets/js/39.26da52be.js"><link rel="prefetch" href="/blog/assets/js/4.bd52d1aa.js"><link rel="prefetch" href="/blog/assets/js/40.ce882dac.js"><link rel="prefetch" href="/blog/assets/js/41.c87b78f9.js"><link rel="prefetch" href="/blog/assets/js/42.53bf9ffc.js"><link rel="prefetch" href="/blog/assets/js/43.ed3e5bd5.js"><link rel="prefetch" href="/blog/assets/js/44.47c9d096.js"><link rel="prefetch" href="/blog/assets/js/45.ac18124c.js"><link rel="prefetch" href="/blog/assets/js/46.dd742084.js"><link rel="prefetch" href="/blog/assets/js/47.e7176f5d.js"><link rel="prefetch" href="/blog/assets/js/48.c3abcfe0.js"><link rel="prefetch" href="/blog/assets/js/49.5089961f.js"><link rel="prefetch" href="/blog/assets/js/5.ac3fab13.js"><link rel="prefetch" href="/blog/assets/js/50.d5d60fa4.js"><link rel="prefetch" href="/blog/assets/js/51.33229a8a.js"><link rel="prefetch" href="/blog/assets/js/52.fae1aa29.js"><link rel="prefetch" href="/blog/assets/js/53.0af5c4fe.js"><link rel="prefetch" href="/blog/assets/js/54.a57bd936.js"><link rel="prefetch" href="/blog/assets/js/55.9698e9d2.js"><link rel="prefetch" href="/blog/assets/js/56.578098ec.js"><link rel="prefetch" href="/blog/assets/js/57.b829bc2b.js"><link rel="prefetch" href="/blog/assets/js/58.b55e06c9.js"><link rel="prefetch" href="/blog/assets/js/59.da4a3e55.js"><link rel="prefetch" href="/blog/assets/js/6.16bd1611.js"><link rel="prefetch" href="/blog/assets/js/60.0210415a.js"><link rel="prefetch" href="/blog/assets/js/62.d43e2aa9.js"><link rel="prefetch" href="/blog/assets/js/63.324d4d98.js"><link rel="prefetch" href="/blog/assets/js/64.04ef7635.js"><link rel="prefetch" href="/blog/assets/js/65.6446e418.js"><link rel="prefetch" href="/blog/assets/js/66.8585aa25.js"><link rel="prefetch" href="/blog/assets/js/67.dfeaefd5.js"><link rel="prefetch" href="/blog/assets/js/68.924c834d.js"><link rel="prefetch" href="/blog/assets/js/69.abbce79f.js"><link rel="prefetch" href="/blog/assets/js/7.05726647.js"><link rel="prefetch" href="/blog/assets/js/70.ed425a23.js"><link rel="prefetch" href="/blog/assets/js/71.05125181.js"><link rel="prefetch" href="/blog/assets/js/72.7b1273f0.js"><link rel="prefetch" href="/blog/assets/js/73.7a1c2600.js"><link rel="prefetch" href="/blog/assets/js/74.bb73b474.js"><link rel="prefetch" href="/blog/assets/js/75.2407e93c.js"><link rel="prefetch" href="/blog/assets/js/76.299197e3.js"><link rel="prefetch" href="/blog/assets/js/77.9ec19bb4.js"><link rel="prefetch" href="/blog/assets/js/78.3bb869bc.js"><link rel="prefetch" href="/blog/assets/js/79.6f77bf35.js"><link rel="prefetch" href="/blog/assets/js/8.2d11f171.js"><link rel="prefetch" href="/blog/assets/js/80.02f43f83.js"><link rel="prefetch" href="/blog/assets/js/81.c0d9fa63.js"><link rel="prefetch" href="/blog/assets/js/82.b9491bae.js"><link rel="prefetch" href="/blog/assets/js/83.722b7b32.js"><link rel="prefetch" href="/blog/assets/js/84.93872ad4.js"><link rel="prefetch" href="/blog/assets/js/85.1f86f81d.js"><link rel="prefetch" href="/blog/assets/js/86.fc0605c4.js"><link rel="prefetch" href="/blog/assets/js/87.e1448029.js"><link rel="prefetch" href="/blog/assets/js/88.e53fcbb2.js"><link rel="prefetch" href="/blog/assets/js/89.8f6cfaa6.js"><link rel="prefetch" href="/blog/assets/js/9.798fb69f.js"><link rel="prefetch" href="/blog/assets/js/90.600e1df3.js"><link rel="prefetch" href="/blog/assets/js/91.c6ece35b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b6bfb1ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">sooxie</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/ios/" class="nav-link router-link-active">
  iOS
</a></div><div class="nav-item"><a href="/blog/web/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/blog/ffmpeg/" class="nav-link">
  ffmpeg
</a></div><div class="nav-item"><a href="/blog/opengl/" class="nav-link">
  OpenGL
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  Algorithm
</a></div><div class="nav-item"><a href="/blog/version/" class="nav-link">
  版本控制
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/ios/" class="nav-link router-link-active">
  iOS
</a></div><div class="nav-item"><a href="/blog/web/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/blog/ffmpeg/" class="nav-link">
  ffmpeg
</a></div><div class="nav-item"><a href="/blog/opengl/" class="nav-link">
  OpenGL
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  Algorithm
</a></div><div class="nav-item"><a href="/blog/version/" class="nav-link">
  版本控制
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Objc</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>多线程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/ios/gcd/gcd.html" aria-current="page" class="active sidebar-link">GCD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ios/gcd/gcd.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/blog/ios/gcd/gcd.html#任务和队列" class="sidebar-link">任务和队列</a></li><li class="sidebar-sub-header"><a href="/blog/ios/gcd/gcd.html#执行任务" class="sidebar-link">执行任务</a></li><li class="sidebar-sub-header"><a href="/blog/ios/gcd/gcd.html#队列组" class="sidebar-link">队列组</a></li><li class="sidebar-sub-header"><a href="/blog/ios/gcd/gcd.html#barrier-async" class="sidebar-link">barrier-async</a></li></ul></li><li><a href="/blog/ios/gcd/operation.html" class="sidebar-link">NSOperation</a></li><li><a href="/blog/ios/gcd/safe.html" class="sidebar-link">线程同步</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内存管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AVFoundation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>coreText</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>逆向</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>源码阅读</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gcd"><a href="#gcd" class="header-anchor">#</a> GCD</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>全称是Grand Central Dispatch，可译为“中枢调度器”,纯C语言，提供了调用函数</p> <ul><li>GCD是苹果公司的多核并行运算解决方案</li> <li>GCD会自动利用更多的CPU内核</li> <li>GCD会自动管理线程的生命周期（创建线程、调度任务、销毁线程）</li> <li>只需编写GCD执行的任务，不需要编写任何线程管理代码</li></ul> <h2 id="任务和队列"><a href="#任务和队列" class="header-anchor">#</a> 任务和队列</h2> <p><strong>GCD中有2个核心概念</strong></p> <ul><li>任务：执行什么操作</li> <li>队列：用来存放任务</li></ul> <h3 id="队列的类型"><a href="#队列的类型" class="header-anchor">#</a> 队列的类型</h3> <h4 id="_1、并发队列-concurrent-dispatch-queue"><a href="#_1、并发队列-concurrent-dispatch-queue" class="header-anchor">#</a> 1、并发队列（Concurrent Dispatch Queue）</h4> <ul><li>可以让多个任务<strong>并发执行</strong>,开启多个<strong>子线程</strong></li> <li>并发功能只有在异步函数（dispatch_async）下才有效</li></ul> <h4 id="_2、串行队列-serial-dispatch-queue"><a href="#_2、串行队列-serial-dispatch-queue" class="header-anchor">#</a> 2、串行队列（Serial Dispatch Queue）</h4> <ul><li>任务按顺序执行，不回开启新线程</li></ul> <h3 id="并发队列的创建"><a href="#并发队列的创建" class="header-anchor">#</a> 并发队列的创建</h3> <h4 id="_1、手动创建并发队列"><a href="#_1、手动创建并发队列" class="header-anchor">#</a> 1、手动创建并发队列</h4> <p><code>dispatch_queue_t queue = dispatch_queue_create(&quot;com.sooxie.queue&quot;, DISPATCH_QUEUE_CONCURRENT);</code></p> <h4 id="_2、全局并发队列"><a href="#_2、全局并发队列" class="header-anchor">#</a> 2、全局并发队列</h4> <p><code>dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</code></p> <p>全局并发队列的优先级</p> <ul><li>#define DISPATCH_QUEUE_PRIORITY_HIGH 2 // 高</li> <li>#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0 // 默认（中）</li> <li>#define DISPATCH_QUEUE_PRIORITY_LOW (-2) // 低</li> <li>#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN // 后台</li></ul> <h3 id="串行队列的创建"><a href="#串行队列的创建" class="header-anchor">#</a> 串行队列的创建</h3> <h4 id="_1、手动创建串行队列"><a href="#_1、手动创建串行队列" class="header-anchor">#</a> 1、手动创建串行队列</h4> <p>// 队列类型传递NULL或者DISPATCH_QUEUE_SERIAL</p> <p><code>dispatch_queue_t queue = dispatch_queue_create(&quot;com.sooxie.queue&quot;, NULL);</code></p> <h4 id="_2、主队列"><a href="#_2、主队列" class="header-anchor">#</a> 2、主队列</h4> <p>// 主队列中的任务，都会放到主线程中执行</p> <p><code>dispatch_queue_t queue = dispatch_get_main_queue();</code></p> <h3 id="同步、异步、并发、串行"><a href="#同步、异步、并发、串行" class="header-anchor">#</a> 同步、异步、并发、串行</h3> <h4 id="_1、同步和异步-能不能开启新的线程"><a href="#_1、同步和异步-能不能开启新的线程" class="header-anchor">#</a> 1、同步和异步（能不能开启新的线程）</h4> <ul><li>同步：只是在<strong>当前线程</strong>中执行任务，<strong>不具备</strong>开启新线程的能力</li> <li>异步：可以在<strong>新的线程</strong>中执行任务，<strong>具备</strong>开启新线程的能力</li></ul> <h4 id="_2、并发和串行-任务的执行方式"><a href="#_2、并发和串行-任务的执行方式" class="header-anchor">#</a> 2、并发和串行（任务的执行方式）</h4> <ul><li>并发：允许多个任务并发（同时）执行</li> <li>串行：一个任务执行完毕后，再执行下一个任务</li></ul> <table><thead><tr><th></th> <th>并发队列</th> <th>手动创建的串行队列</th> <th>主队列</th></tr></thead> <tbody><tr><td>同步-sync</td> <td><span style="color:tomato;">没有</span> 开启新线程,<span style="color:blue;">串行</span>执行任务</td> <td><span style="color:tomato;">没有</span> 开启新线程,<span style="color:blue;">串行</span>执行任务</td> <td><span style="color:tomato;">没有</span> 开启新线程,<span style="color:blue;">串行</span>执行任务</td></tr> <tr><td>异步-async</td> <td><span style="color:green;">有</span>开启新线程,<span style="color:#f7061acc;">并发</span>执行任务</td> <td><span style="color:green;">有</span>开启新线程,<span style="color:blue;">串行</span>执行任务</td> <td><span style="color:tomato;">没有</span>有启新线程,<span style="color:blue;">串行</span>执行任务</td></tr></tbody></table> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h4> <p>在<strong>串行队列</strong>中使用<strong>dispatch_sync</strong>函数添加任务，会阻塞<strong>当前串行队列</strong>,产生<strong>死锁</strong></p> <blockquote><p>串行队列FIFO（先进先出），当前串行队列会执行<strong>dispatch_sync</strong>函数，而<strong>dispatch_sync</strong>代码块的任务会等待串行队列中的<strong>dispatch_sync</strong>执行后，造成互相等待死锁。</p></blockquote> <ul><li>1、主队列，不管是同步还是异步都<strong>不会开启新线程</strong>，串行执行任务</li> <li>2、手动创建的串行队列，异步执行<strong>会开启新线程</strong>，运用多核提升执行效率，但任务是按序执行</li> <li>3、并发队列，同步不会开启新线程且串行执行，<strong>异步会开启新线程</strong>任务并发执行，效率最高</li></ul> <hr> <h2 id="执行任务"><a href="#执行任务" class="header-anchor">#</a> 执行任务</h2> <ol><li>定制任务
<ul><li>想要执行的任务</li></ul></li> <li>将任务添加到队列中
<ul><li>GCD会自动将队列中的任务取出，放到对应的线程中执行</li> <li>任务的取出遵循队列的FIFO原则：先进先出，后进后出</li></ul></li></ol> <h3 id="gcd函数"><a href="#gcd函数" class="header-anchor">#</a> GCD函数</h3> <p>GCD执行任务的常用函数</p> <ul><li>queue：队列</li> <li>block：任务</li></ul> <ol><li>同步执行：<code>dispatch_sync(dispatch_queue_t queue, dispatch_block_t block);</code></li> <li>异步执行：<code>dispatch_async(dispatch_queue_t queue, dispatch_block_t block);</code></li> <li>栅栏函数：<code>dispatch_barrier_async(dispatch_queue_t queue, dispatch_block_t block);</code></li></ol> <h2 id="队列组"><a href="#队列组" class="header-anchor">#</a> 队列组</h2> <p>多个异步操作都执行完毕后，再回到主线程执行操作</p> <div class="language- extra-class"><pre class="language-text"><code>dispatch_group_t group =  dispatch_group_create();
dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // 异步操作1
});
dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // 1异步操作2
});
dispatch_group_notify(group, dispatch_get_main_queue(), ^{
    // 多个任务执行完，通知回到主线程执行
});
</code></pre></div><h2 id="barrier-async"><a href="#barrier-async" class="header-anchor">#</a> barrier-async</h2> <p>异步栅栏函数
<code>dispatch_barrier_async(dispatch_queue_t queue, dispatch_block_t block);</code></p> <ul><li>1、参数并发队列必须是自己通过dispatch_queue_cretate创建的</li> <li>2、传入的是一个串行或是一个全局的并发队列，等同于dispatch_async函数的效果</li></ul> <h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <blockquote><ul><li>Submits a barrier block for asynchronous execution on a dispatch queue.
在调度队列上提交一个异步执行的barrier块</li></ul></blockquote> <p>自己创建的并发队列中执行多个异步操作中加了一个栅栏，只有<code>dispatch_barrier_async</code><strong>函数前</strong>的异步操执行完后，才执行<code>dispatch_barrier_async</code><strong>函数后</strong>的异步操作</p> <h3 id="多读单写"><a href="#多读单写" class="header-anchor">#</a> 多读单写</h3> <h4 id="不添加栅栏函数"><a href="#不添加栅栏函数" class="header-anchor">#</a> 不添加栅栏函数</h4> <div class="language- extra-class"><pre class="language-text"><code>    dispatch_queue_t queue = dispatch_queue_create(&quot;com.sooxie.queue&quot;, DISPATCH_QUEUE_CONCURRENT);
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读1&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读2&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读3&quot;);
    });
    //此处相当于加了一个栅栏， 只有栅栏块的代码执行完后才可以执行后面的异步操作
//    dispatch_barrier_async(queue, ^{
//        NSLog(@&quot;---- Barrier Block 写 ----&quot;);
//    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读1&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读2&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读3&quot;);
    });
</code></pre></div><p>输出可能结果</p> <div class="language- extra-class"><pre class="language-text"><code>Barrier前 - 读1
Barrier前 - 读3
Barrier后 - 读1
Barrier后 - 读2
Barrier后 - 读3
Barrier前 - 读2
</code></pre></div><h4 id="添加栅栏函数"><a href="#添加栅栏函数" class="header-anchor">#</a> 添加栅栏函数</h4> <div class="language- extra-class"><pre class="language-text"><code>    
    dispatch_queue_t queue = dispatch_queue_create(&quot;com.sooxie.queue&quot;, DISPATCH_QUEUE_CONCURRENT);
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读1&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读2&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier前 - 读3&quot;);
    });
    //此处相当于加了一个栅栏， 只有栅栏块的代码执行完后才可以执行后面的异步操作
    dispatch_barrier_async(queue, ^{
        NSLog(@&quot;---- Barrier Block 写 ----&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读1&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读2&quot;);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;Barrier后 - 读3&quot;);
    });
</code></pre></div><p>输出可能结果</p> <div class="language- extra-class"><pre class="language-text"><code>Barrier前 - 读1
Barrier前 - 读3
Barrier前 - 读2
---- Barrier Block 写 ----
Barrier后 - 读2
Barrier后 - 读3
Barrier后 - 读1
</code></pre></div><p>dispatch_barrier_async前面的函数执行完才执行后面的异步操作</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/ios/objc/weak.html" class="prev">
        weak
      </a></span> <span class="next"><a href="/blog/ios/gcd/operation.html">
        NSOperation
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.2b1dd648.js" defer></script><script src="/blog/assets/js/2.9d35f1e7.js" defer></script><script src="/blog/assets/js/61.0a06d51b.js" defer></script>
  </body>
</html>
